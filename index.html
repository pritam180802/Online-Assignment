<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banking Exam Prep: Multiplication Tricks</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* --- Animation Keyframes --- */
        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
        }

        @keyframes rise {
            0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.8; }
            100% { transform: translateY(-120vh) translateX(20px) rotate(10deg); opacity: 0; }
        }

        /* --- Particle Classes --- */
        .particle {
            position: absolute;
            pointer-events: none;
            z-index: 50;
        }

        .confetti { animation-name: fall; animation-timing-function: linear; }

        .coin {
            animation-name: fall;
            animation-timing-function: ease-in;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            color: #78350f;
            border: 2px solid #b45309;
            background: radial-gradient(circle at 30% 30%, #fcd34d, #f59e0b);
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        .balloon {
            animation-name: rise;
            animation-timing-function: ease-out;
            border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
            box-shadow: inset -5px -5px 10px rgba(0,0,0,0.1);
        }
        .balloon::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 15px;
            background: rgba(0,0,0,0.3);
        }

        .symbol {
            animation-name: rise;
            animation-timing-function: linear;
            font-family: monospace;
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col">

    <!-- Global Header -->
    <div class="bg-blue-900 text-white p-3 shadow-md z-20 sticky top-0">
        <div class="max-w-4xl mx-auto flex items-center gap-2 cursor-pointer" onclick="resetQuiz()">
            <i data-lucide="building-2" class="w-6 h-6 text-yellow-400"></i>
            <h1 class="text-lg font-bold">Banking Exam Prep</h1>
        </div>
    </div>

    <!-- Main Content Container -->
    <div id="app-container" class="flex-1 max-w-2xl w-full mx-auto p-4 md:p-6 pb-24">
        <!-- Dynamic Content will be injected here -->
    </div>

    <!-- Footer Navigation -->
    <div id="footer-nav" class="fixed bottom-0 left-0 w-full bg-white border-t border-slate-200 p-4 z-10 hidden">
        <div class="max-w-2xl mx-auto flex justify-between items-center">
            <button id="btn-prev" onclick="prevQuestion()" class="text-slate-500 font-medium px-4 py-2 rounded-lg hover:bg-slate-100 disabled:opacity-30 disabled:cursor-not-allowed">
                Previous
            </button>
            <button id="btn-next" onclick="nextQuestion()" class="bg-blue-900 text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-800 transition-colors flex items-center gap-2 hidden">
                Next Question <i data-lucide="chevron-right" class="w-4 h-4"></i>
            </button>
            <button id="btn-submit" onclick="calculateScore()" class="bg-green-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg hidden">
                Finish Exam
            </button>
            <button id="btn-back-result" onclick="showResult()" class="bg-slate-800 text-white px-8 py-3 rounded-xl font-bold hover:bg-slate-900 transition-colors shadow-lg hidden">
                Back to Results
            </button>
        </div>
    </div>

    <!-- Animation Container -->
    <div id="animation-container" class="fixed inset-0 pointer-events-none z-50 overflow-hidden hidden"></div>

    <script>
        // --- DATA SECTION: UPDATE YOUR QUESTIONS HERE ---
        const quizData = {
            title: "Speed Maths: Multiplication Tricks",
            questions: [
                // Type 1: Table Tricks (Split & Merge)
                {
                    id: 1,
                    text: "68 × 7 = ?",
                    options: ["466", "476", "486", "456"],
                    correct: 1, // B
                    explanation: "Split & Merge: 60×7=420, 8×7=56. 420+56=476."
                },
                {
                    id: 2,
                    text: "84 × 6 = ?",
                    options: ["494", "504", "514", "484"],
                    correct: 1, // B
                    explanation: "Split & Merge: 80×6=480, 4×6=24. 480+24=504."
                },
                {
                    id: 3,
                    text: "47 × 8 = ?",
                    options: ["366", "386", "376", "396"],
                    correct: 2, // C
                    explanation: "Split & Merge: 40×8=320, 7×8=56. 320+56=376."
                },
                {
                    id: 4,
                    text: "93 × 4 = ?",
                    options: ["362", "372", "382", "392"],
                    correct: 1, // B
                    explanation: "Split & Merge: 90×4=360, 3×4=12. 360+12=372."
                },
                {
                    id: 5,
                    text: "58 × 9 = ?",
                    options: ["512", "532", "522", "542"],
                    correct: 2, // C
                    explanation: "Split & Merge: 50×9=450, 8×9=72. 450+72=522."
                },
                // Type 2: 5 Base Method (x5, x25)
                {
                    id: 6,
                    text: "2486 × 5 = ?",
                    options: ["12430", "12440", "12330", "12530"],
                    correct: 0, // A
                    explanation: "Rule for x5: Halve the number and multiply by 10. Half of 2486 is 1243 -> 12430."
                },
                {
                    id: 7,
                    text: "468 × 5 = ?",
                    options: ["2350", "2340", "2240", "2440"],
                    correct: 1, // B
                    explanation: "Rule for x5: Half of 468 is 234 -> 2340."
                },
                {
                    id: 8,
                    text: "724 × 25 = ?",
                    options: ["18000", "18200", "18100", "17900"],
                    correct: 2, // C
                    explanation: "Rule for x25: Divide by 4 and x100. 724/4 = 181 -> 18100."
                },
                {
                    id: 9,
                    text: "368 × 25 = ?",
                    options: ["9100", "9300", "9200", "9400"],
                    correct: 2, // C
                    explanation: "Rule for x25: 368/4 = 92 -> 9200."
                },
                {
                    id: 10,
                    text: "1248 × 25 = ?",
                    options: ["31200", "31400", "32100", "30200"],
                    correct: 0, // A
                    explanation: "Rule for x25: 1248/4 = 312 -> 31200."
                },
                // Type 3: Consecutive & Even/Odd (n(n+1) or Middle^2 - 1)
                {
                    id: 11,
                    text: "14 × 15 = ?",
                    options: ["210", "220", "230", "240"],
                    correct: 0, // A
                    explanation: "Consecutive Rule: Small number squared + Small number. 14² + 14 = 196 + 14 = 210."
                },
                {
                    id: 12,
                    text: "24 × 25 = ?",
                    options: ["575", "625", "600", "650"],
                    correct: 2, // C
                    explanation: "Consecutive Rule: 24² + 24 = 576 + 24 = 600. Or use x25 trick (24/4=6 -> 600)."
                },
                {
                    id: 13,
                    text: "19 × 21 = ?",
                    options: ["401", "399", "398", "402"],
                    correct: 1, // B
                    explanation: "Middle Number Rule: Middle is 20. 20² - 1 = 400 - 1 = 399."
                },
                {
                    id: 14,
                    text: "24 × 26 = ?",
                    options: ["623", "626", "624", "625"],
                    correct: 2, // C
                    explanation: "Middle Number Rule: Middle is 25. 25² - 1 = 625 - 1 = 624."
                },
                {
                    id: 15,
                    text: "49 × 51 = ?",
                    options: ["2499", "2501", "2491", "2509"],
                    correct: 0, // A
                    explanation: "Middle Number Rule: Middle is 50. 50² - 1 = 2500 - 1 = 2499."
                },
                // Type 4: Multiplication by 11, 22, 33...
                {
                    id: 16,
                    text: "524 × 11 = ?",
                    options: ["5664", "5764", "5864", "5754"],
                    correct: 1, // B
                    explanation: "x11 Rule: Write 4. 4+2=6. 2+5=7. Write 5. -> 5764."
                },
                {
                    id: 17,
                    text: "2364 × 11 = ?",
                    options: ["26004", "25004", "26104", "25904"],
                    correct: 0, // A
                    explanation: "x11 Rule: Write 4. 6+4=10 (carry 1). 3+6+1=10 (carry 1). 2+3+1=6. Write 2. -> 26004."
                },
                {
                    id: 18,
                    text: "32 × 22 = ?",
                    options: ["714", "694", "704", "724"],
                    correct: 2, // C
                    explanation: "Factorize 22 as 2 x 11. 32 x 2 = 64. 64 x 11 = 704."
                },
                {
                    id: 19,
                    text: "18 × 33 = ?",
                    options: ["584", "594", "604", "574"],
                    correct: 1, // B
                    explanation: "Factorize 33 as 3 x 11. 18 x 3 = 54. 54 x 11 = 594."
                },
                {
                    id: 20,
                    text: "44 × 24 = ?",
                    options: ["1056", "1066", "1046", "1036"],
                    correct: 0, // A
                    explanation: "Factorize 44 as 4 x 11. 24 x 4 = 96. 96 x 11 = 1056."
                },
                // Type 5: Special Tricks (51, 45, Patterns)
                {
                    id: 21,
                    text: "51 × 24 = ?",
                    options: ["1244", "1224", "1234", "1254"],
                    correct: 1, // B
                    explanation: "x51 Trick: (Number/2) | Number. 24/2 = 12. Append 24. -> 1224."
                },
                {
                    id: 22,
                    text: "51 × 46 = ?",
                    options: ["2346", "2336", "2356", "2366"],
                    correct: 0, // A
                    explanation: "x51 Trick: (Number/2) | Number. 46/2 = 23. Append 46. -> 2346."
                },
                {
                    id: 23,
                    text: "45 × 32 = ?",
                    options: ["1420", "1440", "1460", "1480"],
                    correct: 1, // B
                    explanation: "Double/Half Method: Double 45 (90), Halve 32 (16). 90 x 16 = 1440."
                },
                {
                    id: 24,
                    text: "1666 × 4 = ?",
                    options: ["6666", "6464", "6664", "6646"],
                    correct: 2, // C
                    explanation: "Direct Calculation or Pattern: 16x4=64... easier to just multiply 1666 x 4 = 6664."
                },
                {
                    id: 25,
                    text: "1999 × 5 = ?",
                    options: ["9999", "9955", "9995", "9595"],
                    correct: 2, // C
                    explanation: "Round method: (2000 - 1) x 5 = 10000 - 5 = 9995."
                }
            ]
        };

        // --- STATE MANAGEMENT ---
        let currentState = {
            mode: 'quiz', // 'quiz', 'result', 'review'
            currentIndex: 0,
            answers: {}, // { questionIndex: optionIndex }
            score: 0
        };

        // --- DOM ELEMENTS ---
        const container = document.getElementById('app-container');
        const footer = document.getElementById('footer-nav');
        const btnPrev = document.getElementById('btn-prev');
        const btnNext = document.getElementById('btn-next');
        const btnSubmit = document.getElementById('btn-submit');
        const btnBackResult = document.getElementById('btn-back-result');
        const animBox = document.getElementById('animation-container');

        // --- INITIALIZATION ---
        function init() {
            lucide.createIcons();
            render();
        }

        function resetQuiz() {
            currentState = {
                mode: 'quiz',
                currentIndex: 0,
                answers: {},
                score: 0
            };
            stopRewardAnimation();
            render();
        }

        // --- LOGIC ---
        function selectAnswer(qIndex, optIndex) {
            if (currentState.mode === 'review') return;
            
            currentState.answers[qIndex] = optIndex;
            render(); // Re-render to show selection state
        }

        function nextQuestion() {
            if (currentState.currentIndex < quizData.questions.length - 1) {
                currentState.currentIndex++;
                render();
            }
        }

        function prevQuestion() {
            if (currentState.currentIndex > 0) {
                currentState.currentIndex--;
                render();
            }
        }

        function calculateScore() {
            let s = 0;
            quizData.questions.forEach((q, idx) => {
                if (currentState.answers[idx] === q.correct) s++;
            });
            currentState.score = s;
            currentState.mode = 'result';
            render();
        }

        function startReview() {
            currentState.mode = 'review';
            currentState.currentIndex = 0;
            render();
        }

        function showResult() {
            currentState.mode = 'result';
            render();
        }

        // --- RENDERING ---
        function render() {
            container.innerHTML = '';
            footer.classList.remove('hidden');
            stopRewardAnimation();

            if (currentState.mode === 'quiz' || currentState.mode === 'review') {
                renderQuestionView();
            } else if (currentState.mode === 'result') {
                renderResultView();
            }
            
            lucide.createIcons();
        }

        function renderQuestionView() {
            const q = quizData.questions[currentState.currentIndex];
            const isReview = currentState.mode === 'review';
            const progress = ((currentState.currentIndex + 1) / quizData.questions.length) * 100;
            const selectedAnswer = currentState.answers[currentState.currentIndex];
            const isAnswered = selectedAnswer !== undefined;

            // 1. Progress Bar Header
            const headerHtml = `
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-6">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-slate-800">${quizData.title}</span>
                            ${isReview ? '<span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-bold">REVIEW MODE</span>' : ''}
                        </div>
                        <div class="text-sm font-medium text-slate-500">
                            ${currentState.currentIndex + 1}/${quizData.questions.length}
                        </div>
                    </div>
                    <div class="h-1 bg-slate-100 w-full rounded-full overflow-hidden">
                        <div class="h-full bg-blue-600 transition-all duration-300" style="width: ${progress}%"></div>
                    </div>
                </div>
            `;

            // 2. Question Card
            let optionsHtml = '';
            q.options.forEach((opt, idx) => {
                const isSelected = selectedAnswer === idx;
                const isCorrect = q.correct === idx;
                
                let btnClass = "border-slate-200 hover:bg-slate-50";
                let badgeClass = "border-slate-300 text-slate-500";
                let icon = '';

                if (isReview) {
                    // Review Mode Styling
                    if (isCorrect) {
                        btnClass = "bg-green-100 border-green-500 text-green-800 font-bold ring-1 ring-green-500";
                        badgeClass = "bg-green-600 border-green-600 text-white";
                        icon = '<i data-lucide="check-circle-2" class="w-5 h-5 text-green-600"></i>';
                    } else if (isSelected && !isCorrect) {
                        btnClass = "bg-red-50 border-red-500 text-red-700 font-medium";
                        badgeClass = "border-red-500 text-red-500";
                        icon = '<i data-lucide="x-circle" class="w-5 h-5 text-red-500"></i>';
                    } else {
                        btnClass = "border-slate-100 opacity-60";
                    }
                } else {
                    // Quiz Mode Styling
                    if (isSelected) {
                        btnClass = "border-blue-500 bg-blue-50 ring-1 ring-blue-500";
                        badgeClass = "border-blue-500 text-blue-600";
                    }
                }

                optionsHtml += `
                    <button 
                        onclick="selectAnswer(${currentState.currentIndex}, ${idx})"
                        ${isReview ? 'disabled' : ''}
                        class="w-full text-left p-4 rounded-xl border-2 transition-all flex items-center justify-between group mb-3 ${btnClass}"
                    >
                        <div class="flex items-center gap-3">
                            <span class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border ${badgeClass}">
                                ${String.fromCharCode(65 + idx)}
                            </span>
                            <span>${opt}</span>
                        </div>
                        ${icon}
                    </button>
                `;
            });

            // 3. Explanation (Review Only)
            let explanationHtml = '';
            if (isReview) {
                explanationHtml = `
                    <div class="mt-4 bg-slate-100 p-4 rounded-xl text-slate-700 text-sm border border-slate-200 animate-fade-in">
                        <span class="font-bold text-slate-900 block mb-1">Explanation:</span>
                        ${q.explanation}
                    </div>
                `;
            }

            container.innerHTML = `
                ${headerHtml}
                <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 md:p-8">
                    <h3 class="text-lg md:text-xl font-medium text-slate-800 leading-relaxed mb-6">${q.text}</h3>
                    <div>${optionsHtml}</div>
                    ${explanationHtml}
                </div>
            `;

            // Update Buttons
            btnPrev.disabled = currentState.currentIndex === 0;
            
            // Hide all nav buttons first
            btnNext.classList.add('hidden');
            btnSubmit.classList.add('hidden');
            btnBackResult.classList.add('hidden');

            if (currentState.currentIndex < quizData.questions.length - 1) {
                btnNext.classList.remove('hidden');
            } else {
                // Last question
                if (isReview) {
                    btnBackResult.classList.remove('hidden');
                } else {
                    btnSubmit.classList.remove('hidden');
                    // Only enable submit if answered
                    btnSubmit.disabled = !isAnswered; 
                    if(!isAnswered) btnSubmit.classList.add('opacity-50', 'cursor-not-allowed');
                    else btnSubmit.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            }
        }

        function renderResultView() {
            footer.classList.add('hidden'); // Hide nav bar in result view
            const percentage = Math.round((currentState.score / quizData.questions.length) * 100);
            
            // Determine Grade & Animation
            let grade, animationType;
            
            if (percentage >= 90) {
                grade = { title: "Vedic Master", color: "text-yellow-500", icon: "crown", msg: "Outstanding! A rain of gold for you!" };
                animationType = 'coins';
            } else if (percentage >= 70) {
                grade = { title: "Maths Wizard", color: "text-blue-500", icon: "zap", msg: "Great speed and accuracy!" };
                animationType = 'confetti';
            } else if (percentage >= 50) {
                grade = { title: "Apprentice", color: "text-green-600", icon: "calculator", msg: "Good start, keep rising like a balloon." };
                animationType = 'balloons';
            } else {
                grade = { title: "Maths Learner", color: "text-gray-500", icon: "book-open", msg: "Don't give up! Symbols are your friends." };
                animationType = 'symbols';
            }

            startRewardAnimation(animationType);

            container.innerHTML = `
                <div class="flex flex-col items-center justify-center mt-8">
                    <div class="max-w-md w-full bg-white rounded-3xl shadow-2xl overflow-hidden text-center relative z-10">
                        <div class="p-8 ${percentage >= 70 ? 'bg-blue-900' : 'bg-slate-800'} text-white relative overflow-hidden">
                            <div class="relative z-10 flex flex-col items-center">
                                <i data-lucide="${grade.icon}" class="w-16 h-16 mb-2 ${percentage >= 90 ? 'text-yellow-400' : 'text-white'}"></i>
                                <h2 class="text-3xl font-bold mb-1">${grade.title}</h2>
                                <p class="opacity-80 text-sm">Official Result</p>
                            </div>
                        </div>

                        <div class="p-8 space-y-6">
                            <div class="flex justify-center items-end gap-2 text-slate-800">
                                <span class="text-6xl font-black">${percentage}%</span>
                                <span class="text-xl font-medium text-slate-400 mb-2">Score</span>
                            </div>
                            
                            <p class="text-lg font-medium ${grade.color}">${grade.msg}</p>

                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div class="bg-slate-50 p-3 rounded-xl border border-slate-100">
                                    <span class="block text-slate-400">Correct</span>
                                    <span class="text-xl font-bold text-green-600">${currentState.score}</span>
                                </div>
                                <div class="bg-slate-50 p-3 rounded-xl border border-slate-100">
                                    <span class="block text-slate-400">Total</span>
                                    <span class="text-xl font-bold text-slate-800">${quizData.questions.length}</span>
                                </div>
                            </div>

                            <div class="pt-4 space-y-3">
                                <button onclick="startReview()" class="w-full bg-blue-100 text-blue-900 py-3 rounded-xl font-bold hover:bg-blue-200 transition-colors flex items-center justify-center gap-2">
                                    <i data-lucide="eye" class="w-5 h-5"></i> Review Solutions
                                </button>

                                <button onclick="resetQuiz()" class="w-full bg-slate-900 text-white py-3 rounded-xl font-bold hover:bg-slate-800 transition-colors">
                                    Retake Quiz
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- REWARD ANIMATION SYSTEM ---
        let animationInterval;
        
        function startRewardAnimation(type) {
            animBox.classList.remove('hidden');
            if (animationInterval) clearInterval(animationInterval);
            
            // Initial Burst
            for(let i=0; i<15; i++) createParticle(type);

            // Continuous generation
            let intervalTime = 200;
            if(type === 'coins') intervalTime = 300; 
            if(type === 'symbols') intervalTime = 400;

            animationInterval = setInterval(() => {
                createParticle(type);
            }, intervalTime);
        }

        function stopRewardAnimation() {
            animBox.classList.add('hidden');
            animBox.innerHTML = '';
            if (animationInterval) clearInterval(animationInterval);
        }

        function createParticle(type) {
            const el = document.createElement('div');
            el.classList.add('particle');
            
            const randomX = Math.random() * 100; // 0 to 100%
            
            // Logic based on type
            if (type === 'coins') {
                el.classList.add('coin');
                el.textContent = '₹';
                // Coins fall from top
                el.style.left = randomX + '%';
                el.style.top = '-10vh'; 
                el.style.width = '32px';
                el.style.height = '32px';
                el.style.fontSize = '20px';
                el.style.animationDuration = (Math.random() * 1.5 + 1.5) + 's'; // Fast fall
            } 
            else if (type === 'confetti') {
                el.classList.add('confetti');
                // Confetti falls from top
                el.style.left = randomX + '%';
                el.style.top = '-10vh'; 
                el.style.width = (Math.random() * 10 + 5) + 'px';
                el.style.height = (Math.random() * 10 + 5) + 'px';
                el.style.backgroundColor = ['#EF4444', '#3B82F6', '#10B981', '#F59E0B', '#8B5CF6'][Math.floor(Math.random() * 5)];
                el.style.animationDuration = (Math.random() * 3 + 2) + 's';
                el.style.transform = `rotate(${Math.random() * 360}deg)`;
            }
            else if (type === 'balloons') {
                el.classList.add('balloon');
                // Balloons rise from bottom
                el.style.left = randomX + '%';
                el.style.top = '110vh'; 
                el.style.width = '30px';
                el.style.height = '40px';
                el.style.backgroundColor = ['#FCA5A5', '#93C5FD', '#6EE7B7', '#FDE047'][Math.floor(Math.random() * 4)];
                el.style.animationDuration = (Math.random() * 3 + 4) + 's'; // Slow rise
            }
            else if (type === 'symbols') {
                el.classList.add('symbol');
                // Symbols rise from bottom
                el.textContent = ['+', '-', '×', '÷', '%', '√'][Math.floor(Math.random() * 6)];
                el.style.left = randomX + '%';
                el.style.top = '110vh';
                el.style.fontSize = (Math.random() * 20 + 20) + 'px';
                el.style.color = '#94A3B8'; // Slate 400
                el.style.animationDuration = (Math.random() * 4 + 4) + 's'; // Very slow
            }

            animBox.appendChild(el);
            
            // Auto cleanup
            setTimeout(() => {
                el.remove();
            }, 8000);
        }

        // Start App
        init();

    </script>
</body>
</html>
